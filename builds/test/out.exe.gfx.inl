// Generated with Shader Minifier 1.3.6 (https://github.com/laurentlb/Shader_Minifier/)
#ifndef SHADER_MINIFIER_IMPL
#ifndef SHADER_MINIFIER_HEADER
# define SHADER_MINIFIER_HEADER
# define VAR_backBuffer0 "v"
# define VAR_backBuffer1 "m"
# define VAR_backBuffer2 "o"
# define VAR_backBuffer3 "i"
# define VAR_outColor0 "r"
# define VAR_outColor1 "f"
# define VAR_outColor2 "u"
# define VAR_outColor3 "s"
# define VAR_waveOutPosition "a"
#endif
#else // if SHADER_MINIFIER_IMPL
// graphics_fragment_shader.i
"#version 430\n"
 "layout(binding=0) uniform sampler2D v;"
 "layout(binding=1) uniform sampler2D m;"
 "layout(binding=2) uniform sampler2D o;"
 "layout(binding=3) uniform sampler2D i;"
 "layout(location=0) uniform int a;"
 "vec2 n=vec2(1920,1080);"
 "float c=a/4.8e4;"
 "layout(location=0) out vec4 r;"
 "layout(location=1) out vec4 f;"
 "layout(location=2) out vec4 u;"
 "layout(location=3) out vec4 s;"
 "float x;"
 "int l;"
 "const float y=acos(-1.),e=2.*y,z=y*(3.-sqrt(5.));"
 "mat2 t(float v)"
 "{"
   "float m=cos(v),D=sin(v);"
   "return mat2(m,-D,D,m);"
 "}"
 "vec2 p(float v)"
 "{"
   "return vec2(cos(v),sin(v));"
 "}"
 "vec2 d(vec2 v)"
 "{"
   "float m=atan(v.y,v.x)+e-y*.5+y/32.;"
   "m=mod(m,e/32.)+y*.5-y/32.;"
   "return p(m)*length(v);"
 "}"
 "vec2 d(vec3 v,vec3 f)"
 "{"
   "f=sign(f)*pow(abs(f),vec3(1));"
   "f/=dot(vec3(1),f);"
   "return f.x*v.zy+f.y*v.xz+f.z*v.xy;"
 "}"
 "mat3 h(vec3 v)"
 "{"
   "v=normalize(v);"
   "vec3 f=vec3(0,1,0),m=normalize(cross(f,v));"
   "f=normalize(cross(v,m));"
   "return mat3(m,f,v);"
 "}"
 "vec3 w(float v)"
 "{"
   "mat3 m=v<=6500.?"
     "mat3(vec3(0,-2902.19553737832,-8257.79972789257),vec3(0,1669.58035616666,2575.28275300176),vec3(1,1.330267372335,1.89937538917113)):"
     "mat3(vec3(1745.04252983142,1216.61683614765,-8257.79972789257),vec3(-2666.34742205357,-2173.10123430822,2575.28275300176),vec3(.559953891399315,.703812031405545,1.89937538917113));"
   "return mix(clamp(vec3(m[0]/(vec3(clamp(v,1e3,4e4))+m[1])+m[2]),vec3(0),vec3(1)),vec3(1),smoothstep(1e3,0.,v));"
 "}"
 "uvec3 M(uvec3 v)"
 "{"
   "v=v*1664525u+1013904223u;"
   "v.x+=v.y*v.z;"
   "v.y+=v.z*v.x;"
   "v.z+=v.x*v.y;"
   "v^=v>>16u;"
   "v.x+=v.y*v.z;"
   "v.y+=v.z*v.x;"
   "v.z+=v.x*v.y;"
   "return v;"
 "}"
 "vec3 b(vec3 v)"
 "{"
   "uvec3 m=M(floatBitsToUint(v));"
   "return vec3(m)/float(4294967295u);"
 "}"
 "vec3 B(vec2 v)"
 "{"
   "vec2 m=floor(v),D=fract(v);"
   "D=D*D*(3.-2.*D);"
   "vec3 f=mix(b(vec3(m,.12)),b(vec3(m+vec2(1,0),.12)),D.x),x=mix(b(vec3(m+vec2(0,1),.12)),b(vec3(m+vec2(1),.12)),D.x);"
   "return mix(f,x,D.y);"
 "}"
 "vec3 g(vec2 v)"
 "{"
   "const mat2 m=t(z)*2.;"
   "float y=1.;"
   "vec4 D=vec4(0);"
   "for(int r=0;r<6;r++)"
     "D+=y*vec4(B(v),1),y*=.5,v*=m;"
   "return D.xyz/D.w;"
 "}struct Material{int type;vec3 albedo;float metallic;float roughness;};"
 "float A(float v)"
 "{"
   "return v*v*(v*v)*v;"
 "}"
 "float A(float v,float m)"
 "{"
   "float x=m*v,D=v/(1.-m*m+x*x);"
   "return D*D*(1./y);"
 "}"
 "float A(float v,float y,float m)"
 "{"
   "float x=v*v;"
   "return.5/(m*sqrt(max(0.,y*y*(1.-x)+x))+y*sqrt(max(0.,m*m*(1.-x)+x)));"
 "}"
 "vec3 B(vec3 v,float m)"
 "{"
   "return v+(1.-v)*A(1.-m);"
 "}"
 "float M(float v,float m)"
 "{"
   "return 1.+(v-1.)*A(1.-m);"
 "}"
 "float A(float v,float m,float f,float x)"
 "{"
   "float D=.5+2.*v*x*x;"
   "return M(f,D)*M(m,D)*(1./y);"
 "}"
 "vec3 A(Material v,vec3 m,vec3 x,vec3 f,bool D)"
 "{"
   "vec3 y=v.albedo;"
   "float l=v.metallic,c=v.roughness,r=c*c;"
   "r=max(r,.001);"
   "vec3 o=normalize(m+x);"
   "float s=clamp(dot(f,x),0.,1.)+1e-5,z=clamp(dot(f,m),0.,1.),e=clamp(dot(m,o),0.,1.),n=A(r,clamp(dot(f,o),0.,1.)),p=A(r,s,z);"
   "vec3 i=y*(1.-l)*A(r,s,z,e);"
   "return((D?"
     "1.:"
     "n*p)*B(.04*(1.-l)+y*l,e)+i)*z;"
 "}"
 "float B(float v,float m,float f)"
 "{"
   "return max(f,min(v,m))-length(max(vec2(f-v,f-m),vec2(0)));"
 "}"
 "float M(float v,float m,float f)"
 "{"
   "return min(-f,max(v,m))+length(max(vec2(f+v,f+m),vec2(0)));"
 "}"
 "float b(float v,float m,float f)"
 "{"
   "return M(v,-m,f);"
 "}"
 "float b(vec3 v,vec3 x)"
 "{"
   "vec3 m=abs(v)-x*.5;"
   "return min(max(m.x,max(m.y,m.z)),0.)+length(max(m,0.));"
 "}"
 "float C(vec3 v)"
 "{"
   "v=abs(v)-vec3(.2)*.5;"
   "vec3 m=abs(v);"
   "return min(min(length(max(vec3(v.x,m.yz),0.))+min(max(v.x,max(m.y,m.z)),0.),length(max(vec3(m.x,v.y,m.z),0.))+min(max(m.x,max(v.y,m.z)),0.)),length(max(vec3(m.xy,v.z),0.))+min(max(m.x,max(m.y,v.z)),0.));"
 "}"
 "float C(vec3 v,float m,float x)"
 "{"
   "v.y-=clamp(v.y,-m*.5,m*.5);"
   "return length(v)-x;"
 "}"
 "float d(vec3 v,float m,float f)"
 "{"
   "vec2 D=abs(vec2(length(v.xz),v.y))-vec2(f,m);"
   "return min(max(D.x,D.y),0.)+length(max(D,0.));"
 "}"
 "const vec2 D=vec2(5.7,4)*.5;"
 "vec2 E(inout vec3 v)"
 "{"
   "vec2 m=floor(v.xy/D)*D+D*.5;"
   "v.xy=mod(v.xy,D)-.5*D;"
   "return m;"
 "}"
 "float F(vec3 v)"
 "{"
   "vec2 m=E(v);"
   "if(mod(m.x,D.x*2.)<D.x)"
     "return 1e2;"
   "float f=-v.z;"
   "f=b(f,b(v,vec3(D-.2,4)),.01);"
   "vec3 r=v-vec3(0,0,.75);"
   "r.x=abs(r.x);"
   "vec2 x=D-.2;"
   "f=B(f,b(r,vec3(x,.05)),.01);"
   "vec3 l=vec3(x.x*.25-.125,x.y*.75,.1);"
   "f=b(f,b(r-vec3(l.x*.5+.05,-l.y*.1,0),l),.01);"
   "l.y*=.5;"
   "f=b(f,b(r-vec3(l.x*1.5+.15,l.y*.3,0),l),.01);"
   "f=min(f,-.01+b(v-vec3(0,-D.y*.25,.1),vec3(D.x-.2,D.y*.3,.025)));"
   "vec3 y=v-vec3(0,-D.y*.25,.1);"
   "y.x=y.x-.2*clamp(round(y.x/.2),-12,12);"
   "f=b(f,b(y,vec3(.06,D.y*.25,.05)),.01);"
   "f=min(f,-.01+b(v-vec3(0,-D.y*.1-.025,0),vec3(D.x-.2,.05,.2)));"
   "return min(f,-.01+b(v-vec3(0,-.5*(D.y-.2)-.05,0),vec3(D.x,.05,.15)));"
 "}"
 "float G(vec3 v)"
 "{"
   "vec2 m=E(v);"
   "if(mod(m.x,D.x*2.)<D.x)"
     "return 1e2;"
   "float f=smoothstep(0.,1.5,.9-v.y);"
   "vec3 r=v;"
   "r.x*=mix(1.1,1.,f);"
   "float x=cos(r.x*y*7.)*.05;"
   "r-=vec3(0,0,1.+x*f);"
   "return b(r,vec3(D-.4,.01))*.5-.01;"
 "}"
 "float H(vec3 v)"
 "{"
   "vec2 m=E(v);"
   "if(mod(m.x,D.x*2.)<D.x)"
     "return v-=vec3(-D.x*.45,0,-.035),v.x=abs(v.x-.1)-.1,d(v,D.y*.51,.07);"
   "v-=vec3(1.1,-.77,-.02);"
   "vec3 f=v;"
   "float r=-.01+b(f,vec3(.4,.28,.1));"
   "vec3 l=f-vec3(-.06,0,-.1);"
   "r=b(r,d(l.xzy,.1,.1),.005);"
   "l.z-=.05;"
   "r=min(r,-.002+d(l.xzy,.02,.02));"
   "l.xy=d(l.xy);"
   "return B(r,d(l,.1,.002),.005);"
 "}"
 "float I(vec3 v)"
 "{"
   "vec2 m=E(v);"
   "if(mod(m.x,D.x*2.)<D.x)"
     "{"
       "v-=vec3(-D.x*.45,0,-.035);"
       "v.x=abs(v.x-.1)-.1;"
       "v.y=mod(v.y,1.)-.5;"
       "v.y=abs(v.y)-.06;"
       "float f=d((v-vec3(-.11,0,0)).yxz,.04,.01);"
       "return min(f,d(v,.02,.08));"
     "}"
   "vec3 f=v;"
   "f-=vec3(0,.6,.3);"
   "f.zy*=t(-atan(1.,sqrt(2.)));"
   "f.xy*=t(y/4.);"
   "float r=C(f)-.01;"
   "r=min(r,C(v-vec3(0,.8,.3),.2,.01));"
   "return min(r,d(v-vec3(-1,-.18,0),.01,.075)-.01);"
 "}"
 "float J(vec3 v)"
 "{"
   "v.y+=D.y*.2;"
   "vec3 m=v;"
   "vec2 f=E(v);"
   "if(mod(f.x,D.x*2.)>D.x)"
     "return 1e2;"
   "m=abs(fract(m*10.)-.5);"
   "float y=clamp(smoothstep(.04,.02,m.x)+smoothstep(.04,.02,m.y),0.,1.)*.002,x=-v.z+3.;"
   "const float l=D.x*.2;"
   "float r=clamp((v.x--D.x*.5-l)/(D.x*.5-l--D.x*.5-l)*D.y,min(0.,D.y),max(0.,D.y));"
   "const vec3 o=vec3(D.x,D.y*.5,3),e=vec3(D.x-.2,D.y*.5,3);"
   "float i=b(v-vec3(0,r-D.y,1.5),o);"
   "i=min(i,b(v-vec3(0,r,1.5),o));"
   "i=b(i,b(v-vec3(0,r-D.y+.1,1.6),e),.01);"
   "i=b(i,b(v-vec3(0,r+.1,1.6),e),.01);"
   "i*=l*2./sqrt(D.y*D.y+l*l*4.);"
   "i=min(i,b(v-vec3(0,0,2),vec3(D.x-l*2.,D.y,3)));"
   "i=min(i,x);"
   "i-=.01;"
   "i+=y*.5;"
   "return i;"
 "}"
 "float K(vec3 v)"
 "{"
   "vec2 m=E(v);"
   "return mod(m.x,D.x*2.)<D.x?"
     "1e2:"
     "length(v-vec3(-1,-.06,0))-.1;"
 "}"
 "float L(vec3 v)"
 "{"
   "vec2 m=E(v);"
   "if(mod(m.x,D.x*2.)<D.x)"
     "return 1e2;"
   "vec3 f=v;"
   "f-=vec3(0,.6,.3);"
   "f.zy*=t(-atan(1.,sqrt(2.)));"
   "f.xy*=t(y/4.);"
   "return b(f,vec3(.15));"
 "}"
 "float N(vec3 v)"
 "{"
   "v.y-=D.y*.1;"
   "vec2 m=E(v);"
   "if(mod(m.x,D.x*2.)>D.x)"
     "return 1e2;"
   "vec3 f=v;"
   "f=vec3(abs(f.x)-D.x*.4,f.y+D.y*.335,f.z-2.85);"
   "f.zy*=t(.3);"
   "f.xy*=t(.3);"
   "return C(f,D.x*.2,.02);"
 "}"
 "void E(float v,inout float m,inout int f)"
 "{"
   "if(v<m)"
     "m=v,l=f;"
   "f++;"
 "}"
 "float O(vec3 v)"
 "{"
   "int m=0;"
   "l=-1;"
   "float f=1e2;"
   "E(K(v),f,m);"
   "E(L(v),f,m);"
   "E(N(v),f,m);"
   "E(F(v),f,m);"
   "E(G(v),f,m);"
   "E(I(v),f,m);"
   "E(H(v),f,m);"
   "E(J(v),f,m);"
   "return f;"
 "}"
 "vec3 P(vec3 v)"
 "{"
   "const vec2 m=vec2(1,-1);"
   "int f=l;"
   "vec3 x=normalize(m.xyy*O(v+m.xyy*.001)+m.yyx*O(v+m.yyx*.001)+m.yxy*O(v+m.yxy*.001)+m.xxx*O(v+m.xxx*.001));"
   "l=f;"
   "return x;"
 "}"
 "vec3 F(vec3 v,vec3 m,vec3 x)"
 "{"
   "vec3 f=abs((floor((v+sign(m)*x)/x)+.5)*x-v)-.5*x;"
   "f=max(f,0.);"
   "f/=abs(m);"
   "return f;"
 "}"
 "vec3 Q=vec3(1,0,0);"
 "vec2 G(vec3 v,vec3 m,out vec3 f)"
 "{"
   "float r=1.,x=1e2,y,l=0.;"
   "for(int i=0;i<256;i++)"
     "{"
       "f=m+v*l;"
       "y=O(f);"
       "float o=y*y/(2.*x),e=sqrt(y*y-o*o);"
       "r=min(r,e/(.02*max(0.,l-o)));"
       "x=y;"
       "vec3 c=F(f,v,vec3(D,1000));"
       "c+=f.z<-2.?"
         "1e9:"
         "0.;"
       "y=min(y,c.x+.005);"
       "y=min(y,c.y+.005);"
       "l+=y;"
       "if(y<.005)"
         "return vec2(1,.2);"
       "if(l>1e2)"
         "return Q=vec3(0,1,0),vec2(0,max(r,.2));"
     "}"
   "Q=vec3(0,0,1);"
   "return vec2(0,max(r,.2));"
 "}"
 "Material C(vec3 v,inout vec3 f)"
 "{"
   "Material m=Material(0,vec3(1),.5,.5);"
   "vec2 y=d(v,f);"
   "vec3 D=g(y*3.*vec2(3,1)),l=g(y*96.*vec2(2,1));"
   "m.albedo=vec3(1)*clamp(1.3*mix(.6,1.,D.y)*mix(.8,1.,pow(l.x,3.)),0.,1.);"
   "m.roughness=mix(.5,1.,pow(D.y,3.));"
   "m.metallic=.01;"
   "f=normalize(f+(D*2.-1.)*.05);"
   "return m;"
 "}"
 "Material E(vec3 v,Material f)"
 "{"
   "f.albedo=vec3(.6,.1,.1);"
   "f.roughness=.9;"
   "f.metallic=.01;"
   "return f;"
 "}"
 "Material F(vec3 v,Material m)"
 "{"
   "m.metallic=.9;"
   "return m;"
 "}"
 "Material G(vec3 v,Material f)"
 "{"
   "f.albedo*=vec3(1.5);"
   "f.roughness*=.3;"
   "f.metallic=.1;"
   "return f;"
 "}"
 "Material H(vec3 v,inout vec3 m)"
 "{"
   "Material f=Material(0,vec3(1),.5,.5);"
   "if(l>2)"
     "f=C(v,m);"
   "if(l==0)"
     "{"
       "f.type=1;"
       "const vec3 x=w(4e3);"
       "f.albedo=x;"
     "}"
   "else if(l==1)"
     "{"
       "f.type=1;"
       "const vec3 x=w(8e3);"
       "f.albedo=x;"
     "}"
   "else if(l==2)"
     "f.type=1,f.albedo=w(8e3);"
   "else if(l==4)"
     "f=E(v,f);"
   "else if(l==5)"
     "f=F(v,f);"
   "else if(l==6)"
     "f=G(v,f);"
   "return f;"
 "}"
 "const vec3 R=normalize(vec3(.5,1,-1));"
 "vec3 B(Material v,vec3 m,vec3 f,vec3 x)"
 "{"
   "vec3 l=w(1.2e4);"
   "return A(v,R,f,x,false)*l;"
 "}"
 "vec3 S(vec3 v)"
 "{"
   "vec2 m=vec2(atan(v.z,v.x),acos(v.y)*2.)/e*20.+vec2(.05,.01)*x;"
   "vec3 f=vec3(mix(.1,.5,g(m).x)),y=mix(vec3(.01),f,clamp((v.y+.5)*.5,0.,1.));"
   "float r=clamp(dot(v,R),0.,1.);"
   "r=smoothstep(.8,1.,r);"
   "y*=mix(1.,3.,r);"
   "return mix(y,vec3(1),pow(min(max((r*r-.995)/.005,0.),1.),5.));"
 "}"
 "vec3 C(Material v,vec3 m,vec3 f,vec3 x)"
 "{"
   "vec3 r=vec3(0);"
   "const vec2 D=vec2(1,-1);"
   "vec3 i=-normalize(D.xyy*K(m+D.xyy*.001)+D.yyx*K(m+D.yyx*.001)+D.yxy*K(m+D.yxy*.001)+D.xxx*K(m+D.xxx*.001));"
   "float y=max(0.,K(m)-1.);"
   "vec3 e=x;"
   "l=0;"
   "Material c=H(m,e);"
   "vec3 o=c.albedo*pow(1./(1.+y),2.);"
   "r+=A(v,i,f,x,false)*o;"
   "i=-normalize(D.xyy*L(m+D.xyy*.001)+D.yyx*L(m+D.yyx*.001)+D.yxy*L(m+D.yxy*.001)+D.xxx*L(m+D.xxx*.001));"
   "y=max(0.,L(m));"
   "e=x;"
   "l=1;"
   "c=H(m,e);"
   "o=c.albedo*pow(1./(1.+y),2.);"
   "r+=A(v,i,f,x,false)*o;"
   "i=-normalize(D.xyy*N(m+D.xyy*.001)+D.yyx*N(m+D.yyx*.001)+D.yxy*N(m+D.yxy*.001)+D.xxx*N(m+D.xxx*.001));"
   "y=max(0.,N(m));"
   "e=x;"
   "l=2;"
   "c=H(m,e);"
   "o=c.albedo*pow(1./(1.+y),2.);"
   "r+=A(v,i,f,x,false)*o;"
   "return r;"
 "}"
 "vec3 H(vec3 v,vec3 f,vec3 m)"
 "{"
   "Material D=H(v,m);"
   "if(D.type==1)"
     "return D.albedo;"
   "vec3 r=vec3(0);"
   "r+=B(D,v,f,m);"
   "r+=C(D,v,f,m);"
   "return r;"
 "}"
 "float I(vec3 v,vec3 m)"
 "{"
   "float f=clamp(O(v+m*.05)/.05,0.,1.);"
   "return sqrt(f);"
 "}"
 "vec3 I(inout vec3 v,vec3 f,vec3 m)"
 "{"
   "Material D=H(v,m);"
   "if(D.type==1)"
     "return D.albedo;"
   "v+=m*.005*2.;"
   "vec3 y=vec3(0);"
   "y+=C(D,v,f,m);"
   "y*=I(v,m);"
   "vec3 r,x=reflect(-f,m),l=v;"
   "bool o=G(x,l,r).x>.5;"
   "if(!o)"
     "return y;"
   "vec3 e=P(r);"
   "r+=e*.005*2.;"
   "vec3 c=H(r,-x,e);"
   "y+=c*A(D,x,f,m,true)*D.metallic;"
   "return y;"
 "}"
 "void J(out vec2 v,out vec2 f)"
 "{"
   "x=c;"
   "vec2 m=gl_FragCoord.xy,D=n.xy;"
   "v=m/D;"
   "v+=(b(vec3(m,x)).xy-.5)*.25/D;"
   "f=(v*2.-1.)*(D/min(D.x,D.y));"
 "}"
 "void E(out vec3 v,out vec3 f,out vec3 m,vec2 x)"
 "{"
   "float r=60.;"
   "r=90.;"
   "v=vec3(-.3,-1,-.2);"
   "m=normalize(vec3(-1,0,1));"
   "r=90.;"
   "v=vec3(-.3,-1,-.5);"
   "m=normalize(vec3(-.5,.2,1));"
   "mat3 D=h(m);"
   "float l=1./tan(r*y/360.);"
   "l-=l*length(x)*0.;"
   "vec3 i,e,c,o;"
   "i=normalize(D*vec3(x,l));"
   "e=v;"
   "c=m;"
   "o+=D*vec3(x*2.5,0)+v;"
   "f=normalize(mix(c,i,1.));"
   "v=mix(o,e,1.);"
 "}"
 "vec4 K(vec3 v,vec3 m)"
 "{"
   "vec3 f;"
   "if(G(v,m,f).x<.5)"
     "return vec4(S(v),100);"
   "float x=length(f-m);"
   "vec3 D=P(f),r=I(f,-v,D);"
   "return vec4(r,x);"
 "}"
 "float L(float v,float m)"
 "{"
   "return abs(min(1.,m*m)*.35*(m-v)/(abs(v*(m-.35))+1e-9))*15.;"
 "}"
 "void main()"
 "{"
   "vec2 y,D;"
   "J(y,D);"
   "vec3 l,i,e;"
   "E(l,i,e,D);"
   "vec4 o=K(i,l);"
   "o.xyz+=b(vec3(-x,y*42.2))*.05;"
   "f=max(vec4(0),o);"
   "vec4 c=vec4(0);"
   "float s=textureLod(m,vec2(.5),3.).w;"
   "vec4 a=texture(m,y);"
   "float u=L(a.w,s);"
   "const float Q=sqrt(float(64));"
   "for(int M=0;M<64;M++)"
     "{"
       "float d=float(M);"
       "vec2 g=y+p(d*z)*(u*sqrt(d)/Q)/n;"
       "vec4 t=texture(m,g);"
       "float R=t.w;"
       "if(R>0.)"
         "{"
           "float N=L(R,s);"
           "c+=vec4(t.xyz,1)*max(.001,N);"
         "}"
     "}"
   "c.xyz/=c.w;"
   "vec4 g=texture(v,y);"
   "vec3 M=mix(c.xyz,g.xyz,.5);"
   "M=max(vec3(0),M);"
   "r=vec4(M,1);"
 "}" 
#endif

